#!/bin/bash

# activate your environment
source .env/bin/activate

# bash ./build_exec_aware_pie.sh ./sequences train $DATASET_PATH ./tree

SEQUENCE_PATH=$1
NAME=$2
OUTPUT_PATH=$3
TRACE_PATH=$4

# the processed file is already generated by the strat_3_dataset_LC_BC_PS_finetuning.sh script so we only need to specify the path
PROC_PATH="./datasets/execaware_${NAME}_processed.csv"

mkdir -p datasets

# use already processed path to get the target cleaned from comments
python src/ft/ft_exec_aware_multi_tc.py --processed-path $PROC_PATH --sequence-folder $SEQUENCE_PATH --trace-path $TRACE_PATH --output-path "$OUTPUT_PATH" --suffix $NAME

echo "LE multinput dataset generated"